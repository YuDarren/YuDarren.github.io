(function(){"use strict";var e={6560:function(e,o,t){var n=t(9242),a=t(3396);function s(e,o,t,n,s,r){const l=(0,a.up)("Login"),d=(0,a.up)("Header"),u=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(n.token?n.isLogin:!n.isLogin)?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),(n.token?!n.isLogin:n.isLogin)?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),(n.token?!n.isLogin:n.isLogin)?((0,a.wg)(),(0,a.j4)(u,{key:2})):(0,a.kq)("",!0)],64)}var r=t(7139);const l=e=>((0,a.dD)("data-v-a31b0fb6"),e=e(),(0,a.Cn)(),e),d={class:"head"},u={class:"head_left"},i=l((()=>(0,a._)("div",{class:"head_tit"},[(0,a._)("h2",null,"房屋後臺系統")],-1))),c={class:"head_btns"},m={class:"btn"},p=(0,a.Uk)("人事管理"),f={class:"btn"},g=(0,a.Uk)("物件管理"),I={class:"head_right"},w={class:"head_user"},h={class:"user_photo"},b={class:"user_info"},v={class:"user_name"},_={class:"user_jobtit"},y={class:"head_signout"},P={class:"so_photo"},A=l((()=>(0,a._)("div",{class:"so_name"},"sign out",-1)));function k(e,o,t,n,s,l){const k=(0,a.up)("router-link"),W=(0,a.up)("User"),U=(0,a.up)("el-icon"),F=(0,a.up)("Right");return(0,a.wg)(),(0,a.iD)("header",null,[(0,a._)("div",d,[(0,a._)("div",u,[i,(0,a._)("div",c,[(0,a._)("div",m,[(0,a.Wm)(k,{to:"/permission"},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("div",f,[(0,a.Wm)(k,{to:"/commodity"},{default:(0,a.w5)((()=>[g])),_:1})])])]),(0,a._)("div",I,[(0,a._)("div",w,[(0,a._)("div",h,[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W)])),_:1})]),(0,a._)("div",b,[(0,a._)("div",v,(0,r.zw)(n.userName),1),(0,a._)("div",_,(0,r.zw)(n.typeConst[n.userType]),1)])]),(0,a._)("div",y,[(0,a._)("div",{class:"signout_btn",onClick:o[0]||(o[0]=(...e)=>n.handSignOutBtn&&n.handSignOutBtn(...e))},[(0,a._)("div",P,[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F)])),_:1})]),A])])])])])}var W=t(2748),U=t(6623);const F={0:"管理員",1:"業務主管",2:"業務員"};var C=t(6866),V={components:{User:W.User,Right:W.Right},setup(){const e=(0,U.oR)(),o=(0,C.tv)(),t=F,n=localStorage.username,a=localStorage.type,s=()=>{e.dispatch("handSignOutSubmit"),o.push("/")};return{handSignOutBtn:s,userName:n,userType:a,typeConst:t}}},j=t(89);const L=(0,j.Z)(V,[["render",k],["__scopeId","data-v-a31b0fb6"]]);var q=L;const E=e=>((0,a.dD)("data-v-376726bd"),e=e(),(0,a.Cn)(),e),O={class:"page"},z=E((()=>(0,a._)("div",{class:"login_tit"},"歡迎使用後台系統",-1))),S=(0,a.Uk)("登入");function T(e,o,t,s,r,l){const d=(0,a.up)("el-form-item"),u=(0,a.up)("el-input"),i=(0,a.up)("el-button"),c=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",O,[(0,a.Wm)(c,{ref:"ruleFormRef",model:s.ruleForm,"status-icon":"",rules:s.rules,class:"login","label-width":"auto","label-position":"top","hide-required-asterisk":"false",onKeyup:o[3]||(o[3]=(0,n.D2)((e=>s.handSubmit(s.ruleFormRef)),["enter"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(d,{label:"帳號:",prop:"account",class:"item"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.ruleForm.account,"onUpdate:modelValue":o[0]||(o[0]=e=>s.ruleForm.account=e),type:"text",autocomplete:"off",maxlength:"8",placeholder:"輸入帳號",autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"密碼:",prop:"pwd",class:"item"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.ruleForm.pwd,"onUpdate:modelValue":o[1]||(o[1]=e=>s.ruleForm.pwd=e),type:"password",autocomplete:"off",maxlength:"8",placeholder:"輸入密碼"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"item"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{type:"primary",onClick:o[2]||(o[2]=e=>s.handSubmit(s.ruleFormRef))},{default:(0,a.w5)((()=>[S])),_:1})])),_:1})])),_:1},8,["model","rules"])])}var x=t(4870),D=t(7178),R={setup(){const e=(0,U.oR)(),o=(0,C.tv)(),t=(0,x.iH)(),n=(0,x.qj)({account:"admin",pwd:"1234"}),a=(0,x.qj)({account:[{required:!0,message:"請輸入帳號",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}],pwd:[{required:!0,message:"請輸入密碼",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}]}),s=async t=>{const a=n.account,s=n.pwd;if(e.commit("updateLoginInfoAcc",a),e.commit("updateLoginInfoPwd",s),t)try{await e.dispatch("handLoginSubmit"),o.push("/permission/supervisor"),(0,D.z8)({message:"登入成功",type:"success",customClass:"el-msg",duration:1e3})}catch(r){(0,D.z8)({message:r,type:"error",customClass:"el-msg",duration:1500})}};return{handSubmit:s,rules:a,ruleFormRef:t,ruleForm:n}}};const Z=(0,j.Z)(R,[["render",T],["__scopeId","data-v-376726bd"]]);var H=Z,$={components:{Header:q,Login:H},setup(){const e=(0,U.oR)(),o=(0,a.Fl)((()=>e.getters.isLogin)),t=localStorage.token;return{isLogin:o,token:t}}};const Y=(0,j.Z)($,[["render",s]]);var K=Y;const N={class:"per"},B={class:"per_haeder"},M={class:"per_btns"},G={class:"btn"},J=(0,a.Uk)("主管"),Q={class:"btn"},X=(0,a.Uk)("業務"),ee={class:"addinfo_btn"},oe=(0,a.Uk)("新增");function te(e,o,t,n,s,r){const l=(0,a.up)("router-link"),d=(0,a.up)("el-button"),u=(0,a.up)("AddPersonInfo"),i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("nav",B,[(0,a._)("div",M,[(0,a._)("div",G,[(0,a.Wm)(l,{to:"/permission/supervisor"},{default:(0,a.w5)((()=>[J])),_:1})]),(0,a._)("div",Q,[(0,a.Wm)(l,{to:"/permission/employee"},{default:(0,a.w5)((()=>[X])),_:1})])]),(0,a._)("div",ee,[(0,a.Wm)(d,{color:"#0275b1",onClick:n.isAddInfoBtn},{default:(0,a.w5)((()=>[oe])),_:1},8,["onClick"])])]),n.isAddInfo?((0,a.wg)(),(0,a.j4)(u,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(i)])}const ne=e=>((0,a.dD)("data-v-46ed2530"),e=e(),(0,a.Cn)(),e),ae={class:"add_block"},se=ne((()=>(0,a._)("div",{class:"add_tit"},"新增人事資料",-1))),re=(0,a.Uk)("新增"),le=(0,a.Uk)("清除"),de=(0,a.Uk)("取消");function ue(e,o,t,n,s,r){const l=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-option"),i=(0,a.up)("el-select"),c=(0,a.up)("el-button"),m=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(m,{ref:"ruleFormRef",model:n.ruleForm,"status-icon":"",rules:n.rules,class:"add_window","label-width":"auto","label-position":"top"},{default:(0,a.w5)((()=>[se,(0,a.Wm)(d,{class:"add_input",label:"新增帳號",prop:"account"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.account,"onUpdate:modelValue":o[0]||(o[0]=e=>n.ruleForm.account=e),type:"text",autocomplete:"off",maxlength:"8"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"新增密碼",prop:"pwd"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.pwd,"onUpdate:modelValue":o[1]||(o[1]=e=>n.ruleForm.pwd=e),type:"text",autocomplete:"off",maxlength:"8"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"新增使用者名稱",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.username,"onUpdate:modelValue":o[2]||(o[2]=e=>n.ruleForm.username=e),type:"text",autocomplete:"off",maxlength:"8"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"新增職位",prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:n.ruleForm.type,"onUpdate:modelValue":o[3]||(o[3]=e=>n.ruleForm.type=e),placeholder:"--請選擇職位--",clearable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.options,(e=>((0,a.wg)(),(0,a.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_btns"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"primary",onClick:o[4]||(o[4]=e=>n.submitForm(n.ruleFormRef))},{default:(0,a.w5)((()=>[re])),_:1}),(0,a.Wm)(c,{onClick:o[5]||(o[5]=e=>n.resetForm(n.ruleFormRef))},{default:(0,a.w5)((()=>[le])),_:1}),(0,a.Wm)(c,{onClick:n.isAddInfoCancel},{default:(0,a.w5)((()=>[de])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])}var ie={setup(){const e=(0,U.oR)(),o=[{value:1,label:"業務主管"},{value:2,label:"業務員"}],t=(0,x.iH)(),n=(0,x.qj)({account:"",pwd:"",username:"",type:null}),a=(0,x.qj)({account:[{required:!0,message:"請輸入帳號",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}],pwd:[{required:!0,message:"請輸入密碼",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}],username:[{required:!0,message:"請輸入使用者名稱",trigger:"blur"},{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]*$/,message:"請勿使用特殊字元",trigger:"blur"}],type:[{required:!0,message:"請選擇職位",trigger:"blur"}]}),s=async o=>{const t=n.account,a=n.pwd,s=n.username,r=n.type;if(e.commit("AddPersonInfoAcc",t),e.commit("AddPersonInfoPwd",a),e.commit("AddPersonInfoUsername",s),e.commit("AddPersonInfoType",r),o)try{await e.dispatch("handAddUserInfo"),(0,D.z8)({message:"新增成功",type:"success",customClass:"el-msg"})}catch(l){console.log(l),(0,D.z8)({message:l,type:"error",customClass:"el-msg"})}},r=e=>{e&&e.resetFields()},l=()=>{e.dispatch("handAddInfoAction")};return{isAddInfoCancel:l,options:o,rules:a,resetForm:r,submitForm:s,ruleFormRef:t,ruleForm:n}}};const ce=(0,j.Z)(ie,[["render",ue],["__scopeId","data-v-46ed2530"]]);var me=ce,pe={components:{AddPersonInfo:me},setup(){const e=(0,U.oR)(),o=(0,C.tv)(),t=(0,a.Fl)((()=>e.getters.isAddInfo)),n=()=>{e.dispatch("handAddInfoAction")};return(0,a.bv)((()=>{e.dispatch("getUserInfoOne"),e.dispatch("getUserInfoTwo"),o.push("/permission/supervisor")})),{isAddInfo:t,isAddInfoBtn:n,open:open}}};const fe=(0,j.Z)(pe,[["render",te],["__scopeId","data-v-440150d6"]]);var ge=fe;const Ie=e=>((0,a.dD)("data-v-bfa45eca"),e=e(),(0,a.Cn)(),e),we={class:"com"},he={class:"com_head"},be={class:"com_head_selectes"},ve={class:"chs"},_e=Ie((()=>(0,a._)("p",null,"縣市",-1))),ye={class:"chs"},Pe=Ie((()=>(0,a._)("p",null,"鄉鎮區",-1))),Ae={class:"chs"},ke=Ie((()=>(0,a._)("p",null,"房型",-1))),We={class:"chs"},Ue=Ie((()=>(0,a._)("p",null,"添加條件",-1))),Fe={class:"com_head_btns"},Ce=(0,a.Uk)("新增"),Ve=(0,a.Uk)("匯入"),je={class:"com_main"},Le=(0,a.Uk)("詳情"),qe=(0,a.Uk)("編輯");function Ee(e,o,t,n,s,r){const l=(0,a.up)("el-option"),d=(0,a.up)("el-select"),u=(0,a.up)("el-button"),i=(0,a.up)("el-table-column"),c=(0,a.up)("el-table");return(0,a.wg)(),(0,a.iD)("div",we,[(0,a._)("div",he,[(0,a._)("div",be,[(0,a._)("div",ve,[_e,(0,a.Wm)(d,{modelValue:n.ruleForm.city,"onUpdate:modelValue":o[0]||(o[0]=e=>n.ruleForm.city=e),class:"m-2",placeholder:"請選擇縣市",style:{width:"200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.twzip.city,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",ye,[Pe,(0,a.Wm)(d,{modelValue:n.ruleForm.area,"onUpdate:modelValue":o[1]||(o[1]=e=>n.ruleForm.area=e),class:"m-2",placeholder:"請選擇鄉鎮區",style:{width:"200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.twzip.area,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",Ae,[ke,(0,a.Wm)(d,{modelValue:n.ruleForm.house,"onUpdate:modelValue":o[2]||(o[2]=e=>n.ruleForm.house=e),class:"m-2",placeholder:"請選擇房型",style:{width:"200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.house,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",We,[Ue,(0,a.Wm)(d,{class:"m-2",modelValue:n.ruleForm.require,"onUpdate:modelValue":o[3]||(o[3]=e=>n.ruleForm.require=e),multiple:"",placeholder:"請選擇添加條件",style:{width:"200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.require,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,a._)("div",Fe,[(0,a.Wm)(u,{color:"#0275b1"},{default:(0,a.w5)((()=>[Ce])),_:1}),(0,a.Wm)(u,{color:"#0275b1"},{default:(0,a.w5)((()=>[Ve])),_:1})])]),(0,a._)("div",je,[(0,a.Wm)(c,{data:n.tableData,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{fixed:"",prop:"date",label:"日期",width:"200"}),(0,a.Wm)(i,{prop:"city",label:"城市",width:"200"}),(0,a.Wm)(i,{prop:"name",label:"鄉鎮區",width:"200"}),(0,a.Wm)(i,{prop:"state",label:"房型",width:"200"}),(0,a.Wm)(i,{prop:"address",label:"需求",width:"200"}),(0,a.Wm)(i,{fixed:"right",width:"120"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{link:"",type:"primary",size:"small"},{default:(0,a.w5)((()=>[Le])),_:1}),(0,a.Wm)(u,{link:"",type:"primary",size:"small"},{default:(0,a.w5)((()=>[qe])),_:1})])),_:1})])),_:1},8,["data"])])])}var Oe=t(6265),ze=t.n(Oe);const Se=ze().create({baseURL:"https://vue-lessons-api.herokuapp.com/"}),Te=()=>Se.get("/city/list");var xe={setup(){const e=(0,x.qj)({city:[],area:[]}),o=(0,x.qj)({city:"",area:"",house:"",require:""}),t=(0,x.qj)([{value:1,label:"整層住家"},{value:2,label:"獨立套房"},{value:3,label:"分租套房"},{value:4,label:"雅房"},{value:5,label:"車位"},{value:6,label:"其他"}]),n=(0,x.qj)([{value:1,label:"新上架"},{value:2,label:"近捷運"},{value:3,label:"可養寵物"},{value:4,label:"可開伙"},{value:5,label:"有車位"},{value:6,label:"有電梯"},{value:7,label:"有陽台"},{value:8,label:"可短期租賃"}]),s=(0,x.qj)([{date:"2022-09-03",name:"西區",state:"分租套房",city:"台中市",address:"新上架,可養寵物",zip:"CA 90036",tag:"Home"},{date:"2022-08-30",name:"中山區",state:"獨立套房",city:"台北市",address:"有陽台,可短期租賃",zip:"CA 90036",tag:"Office"},{date:"2022-09-10",name:"秀水鄉",state:"整層住家",city:"彰化縣",address:"有電梯,可養寵物,可開伙",zip:"CA 90036",tag:"Home"},{date:"2022-08-01",name:"板橋區",state:"雅房",city:"新北市",address:"近捷運,有電梯,有陽台",zip:"CA 90036",tag:"Office"}]);return(0,a.YP)((()=>o.city),(t=>{const n=e.city.filter((e=>e.name===t));o.area="",e.area=n[0].area})),(0,a.bv)((()=>{Te().then((o=>{e.city=o.data.twzip.city}))})),{twzip:e,ruleForm:o,house:t,require:n,tableData:s}}};const De=(0,j.Z)(xe,[["render",Ee],["__scopeId","data-v-bfa45eca"]]);var Re=De;const Ze={class:"home_main"};function He(e,o,t,n,s,r){return(0,a.wg)(),(0,a.iD)("div",Ze,"後臺系統切版")}var $e={};const Ye=(0,j.Z)($e,[["render",He],["__scopeId","data-v-1349784e"]]);var Ke=Ye;const Ne={class:"userinfo"},Be=(0,a.Uk)("編輯");function Me(e,o,t,n,s,l){const d=(0,a.up)("el-table-column"),u=(0,a.up)("el-button"),i=(0,a.up)("el-table"),c=(0,a.up)("EditPersonInfo");return(0,a.wg)(),(0,a.iD)("div",Ne,[(0,a.Wm)(i,{class:"table",data:n.personnelList,height:"800",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"id",prop:"id",label:"員工編號"}),(0,a.Wm)(d,{class:"username",prop:"username",label:"姓名"}),(0,a.Wm)(d,{class:"account",prop:"account",label:"帳號"}),(0,a.Wm)(d,{class:"type",prop:"type",label:"職位"},{default:(0,a.w5)((e=>[(0,a._)("div",null,(0,r.zw)(n.typeConst[e.row.type]),1)])),_:1}),(0,a.Wm)(d,{fixed:"right"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{color:"#626aef",plain:"",onClick:o=>n.handEditInfoAction(e.row)},{default:(0,a.w5)((()=>[Be])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n.isEdit?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)])}const Ge=e=>((0,a.dD)("data-v-e5d44108"),e=e(),(0,a.Cn)(),e),Je={class:"add_block"},Qe=Ge((()=>(0,a._)("div",{class:"add_tit"},"編輯資料",-1))),Xe=(0,a.Uk)("送出"),eo=(0,a.Uk)("取消");function oo(e,o,t,n,s,r){const l=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-option"),i=(0,a.up)("el-select"),c=(0,a.up)("el-button"),m=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",Je,[(0,a.Wm)(m,{ref:"ruleFormRef",model:n.ruleForm,"status-icon":"",rules:n.rules,class:"add_window","label-width":"auto","label-position":"top"},{default:(0,a.w5)((()=>[Qe,(0,a.Wm)(d,{class:"add_input",label:"編輯帳號",prop:"account"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.account,"onUpdate:modelValue":o[0]||(o[0]=e=>n.ruleForm.account=e),type:"text",autocomplete:"off",maxlength:"8"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"更改密碼",prop:"pwd"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.pwd,"onUpdate:modelValue":o[1]||(o[1]=e=>n.ruleForm.pwd=e),type:"text",autocomplete:"off",maxlength:"8",placeholder:"若密碼無須變更，不用輸入"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"編輯使用者名稱",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:n.ruleForm.username,"onUpdate:modelValue":o[2]||(o[2]=e=>n.ruleForm.username=e),type:"text",autocomplete:"off",maxlength:"8"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_input",label:"編輯職位",prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:n.ruleForm.type,"onUpdate:modelValue":o[3]||(o[3]=e=>n.ruleForm.type=e),placeholder:"--請選擇職位--",clearable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.options,(e=>((0,a.wg)(),(0,a.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(d,{class:"add_btns"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"primary",onClick:o[4]||(o[4]=e=>n.submitForm(n.ruleFormRef))},{default:(0,a.w5)((()=>[Xe])),_:1}),(0,a.Wm)(c,{onClick:n.isEditInfoCancel},{default:(0,a.w5)((()=>[eo])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])}var to={setup(){const e=(0,U.oR)(),o=[{value:1,label:"業務主管"},{value:2,label:"業務員"}],t=(0,x.iH)(),n=(0,x.qj)({account:e.state.editPersonInfo.account,pwd:e.state.editPersonInfo.pwd,username:e.state.editPersonInfo.username,type:e.state.editPersonInfo.type}),a=(0,x.qj)({account:[{required:!0,message:"請輸入帳號",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}],pwd:[{required:!1,message:"請輸入密碼",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"請輸入英文或數字",trigger:"blur"}],username:[{required:!0,message:"請輸入使用者名稱",trigger:"blur"},{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]*$/,message:"請勿使用特殊字元",trigger:"blur"}],type:[{required:!0,message:"請選擇職位",trigger:"blur"}]}),s=async o=>{const t=n.account,a=n.pwd,s=n.username,r=n.type;if(e.commit("editPersonInfoAcc",t),e.commit("editPersonInfoPwd",a),e.commit("editPersonInfoUsername",s),e.commit("editPersonInfoType",r),o)try{await e.dispatch("handEditUserInfo"),(0,D.z8)({message:"編輯成功",type:"success",customClass:"el-msg"})}catch(l){console.log(l),(0,D.z8)({message:l,type:"error",customClass:"el-msg"})}},r=()=>{e.dispatch("handEditInfoAction")};return{isEditInfoCancel:r,options:o,rules:a,submitForm:s,ruleFormRef:t,ruleForm:n}}};const no=(0,j.Z)(to,[["render",oo],["__scopeId","data-v-e5d44108"]]);var ao=no,so={components:{EditPersonInfo:ao},setup(){const e=F,o=(0,U.oR)(),t=(0,a.Fl)((()=>o.getters.isEdit)),n=e=>{const t=e.id,n=e.account,a=e.username,s=e.type;o.commit("editPersonInfoID",t),o.commit("editPersonInfoAcc",n),o.commit("editPersonInfoUsername",a),o.commit("editPersonInfoType",s),o.dispatch("handEditInfoAction")};return{personnelList:(0,a.Fl)((()=>o.getters.personInfoTwo)),typeConst:e,isEdit:t,handEditInfoAction:n}}};const ro=(0,j.Z)(so,[["render",Me],["__scopeId","data-v-0c74ced6"]]);var lo=ro;const uo={class:"userinfo"},io=(0,a.Uk)("編輯");function co(e,o,t,n,s,l){const d=(0,a.up)("el-table-column"),u=(0,a.up)("el-button"),i=(0,a.up)("el-table"),c=(0,a.up)("EditPersonInfo");return(0,a.wg)(),(0,a.iD)("div",uo,[(0,a.Wm)(i,{class:"table",data:n.personnelList,height:"800",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"id",prop:"id",label:"員工編號"}),(0,a.Wm)(d,{class:"username",prop:"username",label:"姓名"}),(0,a.Wm)(d,{class:"account",prop:"account",label:"帳號"}),(0,a.Wm)(d,{class:"type",prop:"type",label:"職位"},{default:(0,a.w5)((e=>[(0,a._)("div",null,(0,r.zw)(n.typeConst[e.row.type]),1)])),_:1}),(0,a.Wm)(d,{fixed:"right"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{color:"#626aef",plain:"",onClick:o=>n.handEditInfoAction(e.row)},{default:(0,a.w5)((()=>[io])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n.isEdit?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)])}var mo={components:{EditPersonInfo:ao},setup(){const e=F,o=(0,U.oR)(),t=(0,a.Fl)((()=>o.getters.isEdit)),n=e=>{const t=e.id,n=e.account,a=e.username,s=e.type;o.commit("editPersonInfoID",t),o.commit("editPersonInfoAcc",n),o.commit("editPersonInfoUsername",a),o.commit("editPersonInfoType",s),o.dispatch("handEditInfoAction")};return{personnelList:(0,a.Fl)((()=>o.getters.personInfoOne)),typeConst:e,isEdit:t,handEditInfoAction:n}}};const po=(0,j.Z)(mo,[["render",co],["__scopeId","data-v-199c2000"]]);var fo=po;const go=[{path:"/",name:"home",component:Ke},{path:"/permission",name:"permission",component:ge,children:[{path:"employee",component:lo},{path:"supervisor",component:fo}]},{path:"/commodity",name:"commodity",component:Re},{path:"/addpersoninfo",name:"addpersoninfo",component:me}],Io=(0,C.p7)({history:(0,C.PO)("/housebs/"),routes:go});var wo=Io;const ho=ze().create({baseURL:"https://a4ad-116-241-112-119.jp.ngrok.io"});ho.interceptors.response.use((function(e){return e}),(function(e){return 403===e.response.status&&(Ao.dispatch("handCloseAllPage"),C["default"].push("/")),Promise.reject(e)}));const bo=e=>ho.post("/login",e),vo=(e,o)=>ho.post("/users/1",e,o),_o=(e,o)=>ho.post("/users/2",e,o),yo=(e,o)=>ho.post("/users",e,o),Po=(e,o)=>{const t=Ao.getters.editPersonInfoID;return ho.put(`/users/${t}`,e,o)};var Ao=(0,U.MT)({state:{isLogin:!1,isAddInfo:!1,isEdit:!1,loginInfo:{account:"",pwd:""},userInfo:{username:"",type:""},personInfoOne:[],personInfoTwo:[],taiwanInfo:[],addPersonInfo:{account:"",pwd:"",username:"",type:0},editPersonInfo:{id:0,account:"",pwd:"",username:"",type:0},editPersonInfoNopwd:{id:0,account:"",username:"",type:0},token:""},actions:{async handLoginSubmit(e){try{await bo(e.state.loginInfo).then((o=>{const t=o.data.token,n=o.data.username,a=o.data.type,s=!e.state.isLogin;e.commit("setUserInfo",{username:n,type:a}),e.commit("changeIsLogin",s),e.commit("setToken",t),console.log("login",o)}))}catch(o){if(1e3===o.response.data.code)return Promise.reject(o.response.data.msg);if(9e3===o.response.data.code)return Promise.reject("請輸入帳號或密碼")}},handSignOutSubmit(e){const o=!e.state.isLogin,t="",n="";e.commit("clearLocalStorage"),e.commit("updateLoginInfoAcc",t),e.commit("updateLoginInfoPwd",n),e.commit("changeIsLogin",o)},handCloseAllPage(e){const o=!1,t="",n="",a="",s=null;e.commit("clearLocalStorage"),e.commit("updateLoginInfoAcc",t),e.commit("updateLoginInfoPwd",n),e.commit("changeIsLogin",!o),e.commit("AddPersonInfoAcc",t),e.commit("AddPersonInfoPwd",n),e.commit("AddPersonInfoUsername",a),e.commit("AddPersonInfoType",s),e.commit("changeIsAddInfo",o),e.commit("changeIsEdit",o)},handAddInfoAction(e){const o=!e.state.isAddInfo,t="",n="",a="",s=null;e.commit("AddPersonInfoAcc",t),e.commit("AddPersonInfoPwd",n),e.commit("AddPersonInfoUsername",a),e.commit("AddPersonInfoType",s),e.commit("changeIsAddInfo",o)},async handAddUserInfo(e){try{await yo(this.state.addPersonInfo,{headers:{Authorization:localStorage.token}});const o=!e.state.isAddInfo,t="",n="",a="",s=null;e.commit("AddPersonInfoAcc",t),e.commit("AddPersonInfoPwd",n),e.commit("AddPersonInfoUsername",a),e.commit("AddPersonInfoType",s),e.commit("changeIsAddInfo",o),e.dispatch("getUserInfoOne"),e.dispatch("getUserInfoTwo")}catch(o){return 2e3===o.response.data.code?Promise.reject("新增失敗，帳號已存在"):Promise.reject("欄位不得為空")}},handEditInfoAction(e){const o=!e.state.isEdit;e.commit("changeIsEdit",o)},async handEditUserInfo(e){const o=e.state.editPersonInfo;try{await Po(o,{headers:{Authorization:localStorage.token}});const t=!e.state.isEdit,n="";e.commit("changeIsEdit",t),e.commit("editPersonInfoPwd",n),e.dispatch("getUserInfoOne"),e.dispatch("getUserInfoTwo")}catch(t){return 2e3===t.response.data.code?Promise.reject("編輯失敗，帳號已存在"):Promise.reject("欄位不得為空")}},getUserInfoOne(e){vo(null,{headers:{Authorization:localStorage.token}}).then((o=>{const t=o.data;e.commit("updatePersonInfoOne",t)}))},getUserInfoTwo(e){_o(null,{headers:{Authorization:localStorage.token}}).then((o=>{const t=o.data;e.commit("updatePersonInfoTwo",t)}))}},mutations:{updateLoginInfoAcc(e,o){e.loginInfo.account=o},updateLoginInfoPwd(e,o){e.loginInfo.pwd=o},updatePersonInfoOne(e,o){e.personInfoOne=o},updatePersonInfoTwo(e,o){e.personInfoTwo=o},getTaiwanInfo(e,o){e.taiwanInfo=o},AddPersonInfoAcc(e,o){e.addPersonInfo.account=o},AddPersonInfoPwd(e,o){e.addPersonInfo.pwd=o,console.log("vuex.add.pwd =>",e.addPersonInfo.pwd)},AddPersonInfoUsername(e,o){e.addPersonInfo.username=o},AddPersonInfoType(e,o){e.addPersonInfo.type=o},editPersonInfoID(e,o){e.editPersonInfo.id=o},editPersonInfoAcc(e,o){e.editPersonInfo.account=o,e.editPersonInfoNopwd.account=o},editPersonInfoPwd(e,o){e.editPersonInfo.pwd=o},editPersonInfoUsername(e,o){e.editPersonInfo.username=o,e.editPersonInfoNopwd.username=o},editPersonInfoType(e,o){e.editPersonInfo.type=o,e.editPersonInfoNopwd.type=o},setToken(e,o){localStorage.setItem("token",o),e.token=o},setUserInfo(e,{username:o,type:t}){localStorage.setItem("username",o),localStorage.setItem("type",t),e.userInfo.username=o,e.userInfo.type=t},clearLocalStorage(){localStorage.clear()},changeIsLogin(e,o){e.isLogin=o},changeIsAddInfo(e,o){e.isAddInfo=o},changeIsEdit(e,o){e.isEdit=o}},getters:{isLogin(e){return e.isLogin},isAddInfo(e){return e.isAddInfo},isEdit(e){return e.isEdit},loginInfoAcc(e){return e.loginInfo.account},loginInfoPwd(e){return e.loginInfo.pwd},userInfoUsername(e){return e.userInfo.username},userInfoUsertype(e){return e.userInfo.type},personInfoOne(e){return e.personInfoOne},personInfoTwo(e){return e.personInfoTwo},editPersonInfoID(e){return e.editPersonInfo.id},addPersonInfo(e){return e.addPersonInfo},addPersonInfoAcc(e){return e.addPersonInfo.account},addPersonInfoPwd(e){return e.addPersonInfo.pwd},addPersonInfoUsername(e){return e.addPersonInfo.username},addPersonInfoType(e){return e.addPersonInfo.type},token(e){return e.token}}}),ko=t(5);t(4415);const Wo=(0,n.ri)(K);for(const[Uo,Fo]of Object.entries(W))Wo.component(Uo,Fo);Wo.use(Ao).use(ko.Z).use(wo).mount("#app")}},o={};function t(n){var a=o[n];if(void 0!==a)return a.exports;var s=o[n]={exports:{}};return e[n].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(o,n,a,s){if(!n){var r=1/0;for(i=0;i<e.length;i++){n=e[i][0],a=e[i][1],s=e[i][2];for(var l=!0,d=0;d<n.length;d++)(!1&s||r>=s)&&Object.keys(t.O).every((function(e){return t.O[e](n[d])}))?n.splice(d--,1):(l=!1,s<r&&(r=s));if(l){e.splice(i--,1);var u=a();void 0!==u&&(o=u)}}return o}s=s||0;for(var i=e.length;i>0&&e[i-1][2]>s;i--)e[i]=e[i-1];e[i]=[n,a,s]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var a,s,r=n[0],l=n[1],d=n[2],u=0;if(r.some((function(o){return 0!==e[o]}))){for(a in l)t.o(l,a)&&(t.m[a]=l[a]);if(d)var i=d(t)}for(o&&o(n);u<r.length;u++)s=r[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(i)},n=self["webpackChunkbackendsystem"]=self["webpackChunkbackendsystem"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(6560)}));n=t.O(n)})();
//# sourceMappingURL=app.dd4ee194.js.map